<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ES6 Destructuring - Advanced Patterns</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .hero {
            text-align: center;
            padding: 60px 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            margin-bottom: 40px;
            backdrop-filter: blur(10px);
        }

        .hero h1 {
            font-size: 3.5em;
            margin-bottom: 20px;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .hero p {
            font-size: 1.3em;
            color: rgba(255, 255, 255, 0.9);
            max-width: 600px;
            margin: 0 auto;
        }

        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .card h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .card h3 {
            color: #764ba2;
            margin: 25px 0 15px 0;
            font-size: 1.3em;
        }

        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            overflow-x: auto;
            position: relative;
        }

        .code-block::before {
            content: attr(data-language);
            position: absolute;
            top: -12px;
            right: 15px;
            background: #667eea;
            color: white;
            padding: 2px 10px;
            border-radius: 12px;
            font-size: 0.8em;
        }

        .demo-container {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid #667eea;
        }

        .demo-title {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
        }

        .output {
            background: #2d3748;
            color: #68d391;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            max-height: 200px;
            overflow-y: auto;
        }

        .highlight {
            background: linear-gradient(120deg, #a8edea 0%, #fed6e3 100%);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #667eea;
        }

        .best-practices {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
        }

        .best-practices h3 {
            color: white;
            margin-bottom: 15px;
        }

        .best-practices ul {
            list-style: none;
            padding-left: 0;
        }

        .best-practices li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
        }

        .best-practices li::before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #68d391;
            font-weight: bold;
        }

        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .comparison-item {
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e9ecef;
        }

        .comparison-item.before {
            background: #fff5f5;
            border-color: #feb2b2;
        }

        .comparison-item.after {
            background: #f0fff4;
            border-color: #9ae6b4;
        }

        .comparison-item h4 {
            margin-bottom: 10px;
            color: #2d3748;
        }

        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid #e9ecef;
        }

        .tab {
            padding: 10px 20px;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            font-size: 1em;
            border-radius: 8px 8px 0 0;
            margin-right: 5px;
            transition: all 0.3s ease;
        }

        .tab.active {
            background: #667eea;
            color: white;
        }

        .tab-content {
            display: none;
            padding: 20px;
            background: white;
            border-radius: 0 8px 8px 8px;
        }

        .tab-content.active {
            display: block;
        }

        @media (max-width: 768px) {
            .content-grid {
                grid-template-columns: 1fr;
            }

            .hero h1 {
                font-size: 2.5em;
            }

            .comparison {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="hero">
            <h1>ES6 Destructuring</h1>
            <p>Master advanced destructuring patterns for cleaner, more readable JavaScript code</p>
        </div>

        <div class="content-grid">
            <div class="card">
                <h2>🔄 Array Destructuring</h2>

                <h3>Basic Array Destructuring</h3>
                <div class="comparison">
                    <div class="comparison-item before">
                        <h4>Before ES6</h4>
                        <div class="code-block" data-language="JavaScript">
                            const arr = [1, 2, 3, 4, 5];
                            const first = arr[0];
                            const second = arr[1];
                            const third = arr[2];
                        </div>
                    </div>
                    <div class="comparison-item after">
                        <h4>With ES6 Destructuring</h4>
                        <div class="code-block" data-language="JavaScript">
                            const arr = [1, 2, 3, 4, 5];
                            const [first, second, third] = arr;
                        </div>
                    </div>
                </div>

                <h3>Advanced Array Destructuring</h3>
                <div class="code-block" data-language="JavaScript">
                    // Skipping elements
                    const [first, , third, ...rest] = [1, 2, 3, 4, 5];
                    console.log(first); // 1
                    console.log(third); // 3
                    console.log(rest); // [4, 5]

                    // Default values
                    const [a = 10, b = 20, c = 30] = [1, 2];
                    console.log(a, b, c); // 1 2 30

                    // Swapping variables
                    let x = 1, y = 2;
                    [x, y] = [y, x];
                    console.log(x, y); // 2 1

                    // Nested array destructuring
                    const nested = [[1, 2], [3, 4], [5, 6]];
                    const [[a1, a2], [b1], [c1, c2]] = nested;
                    console.log(a1, a2, b1, c1, c2); // 1 2 3 5 6

                    // Function return destructuring
                    function getCoordinates() {
                    return [10, 20, 30];
                    }
                    const [x, y, z] = getCoordinates();

                    // String destructuring
                    const [char1, char2, ...chars] = "Hello";
                    console.log(char1, char2, chars); // H e ['l', 'l', 'o']

                    // Set destructuring
                    const mySet = new Set([1, 2, 3, 4]);
                    const [first, second] = mySet;
                    console.log(first, second); // 1 2
                </div>

                <h3>Practical Array Destructuring</h3>
                <div class="code-block" data-language="JavaScript">
                    // URL parsing
                    const url = "https://example.com/users/123/posts/456";
                    const [protocol, , domain, , userId, , postId] = url.split('/');

                    // CSV parsing
                    const csvLine = "John,Doe,30,Engineer";
                    const [firstName, lastName, age, profession] = csvLine.split(',');

                    // React useState pattern
                    function useState(initial) {
                    let state = initial;
                    const setState = (newState) => { state = newState; };
                    return [state, setState];
                    }
                    const [count, setCount] = useState(0);

                    // Multiple assignment from functions
                    function getMinMax(arr) {
                    return [Math.min(...arr), Math.max(...arr)];
                    }
                    const [min, max] = getMinMax([1, 5, 3, 9, 2]);

                    // Array flattening with destructuring
                    const matrix = [[1, 2], [3, 4], [5, 6]];
                    const flattened = [];
                    for (const [a, b] of matrix) {
                    flattened.push(a, b);
                    }
                    console.log(flattened); // [1, 2, 3, 4, 5, 6]
                </div>

                <div class="demo-container">
                    <div class="demo-title">🎯 Array Destructuring Demo</div>
                    <button onclick="runArrayDestructuring()">Run Array Examples</button>
                    <div id="array-output" class="output" style="display: none;"></div>
                </div>
            </div>

            <div class="card">
                <h2>🏗️ Object Destructuring</h2>

                <h3>Basic Object Destructuring</h3>
                <div class="comparison">
                    <div class="comparison-item before">
                        <h4>Before ES6</h4>
                        <div class="code-block" data-language="JavaScript">
                            const user = {
                            name: 'John',
                            age: 30,
                            email: 'john@example.com'
                            };
                            const name = user.name;
                            const age = user.age;
                            const email = user.email;
                        </div>
                    </div>
                    <div class="comparison-item after">
                        <h4>With ES6 Destructuring</h4>
                        <div class="code-block" data-language="JavaScript">
                            const user = {
                            name: 'John',
                            age: 30,
                            email: 'john@example.com'
                            };
                            const {name, age, email} = user;
                        </div>
                    </div>
                </div>

                <h3>Advanced Object Destructuring</h3>
                <div class="code-block" data-language="JavaScript">
                    // Renaming variables
                    const {name: firstName, age: years} = user;
                    console.log(firstName, years); // John 30

                    // Default values
                    const {name, age, city = 'Unknown'} = user;
                    console.log(name, age, city); // John 30 Unknown

                    // Nested destructuring
                    const person = {
                    name: 'Alice',
                    address: {
                    street: '123 Main St',
                    city: 'New York',
                    coordinates: {
                    lat: 40.7128,
                    lng: -74.0060
                    }
                    }
                    };

                    const {
                    name,
                    address: {
                    street,
                    city,
                    coordinates: {lat, lng}
                    }
                    } = person;

                    // Computed property names
                    const prop = 'dynamicProperty';
                    const {[prop]: value} = {dynamicProperty: 'Hello'};
                    console.log(value); // Hello

                    // Rest properties
                    const {name, ...otherProps} = {
                    name: 'Bob',
                    age: 25,
                    city: 'Boston',
                    country: 'USA'
                    };
                    console.log(name); // Bob
                    console.log(otherProps); // {age: 25, city: 'Boston', country: 'USA'}
                </div>

                <h3>Function Parameter Destructuring</h3>
                <div class="code-block" data-language="JavaScript">
                    // Object parameter destructuring
                    function createUser({name, age, email = 'No email'}) {
                    return {
                    name,
                    age,
                    email,
                    id: Math.random()
                    };
                    }

                    const newUser = createUser({
                    name: 'Charlie',
                    age: 28
                    });

                    // With default values
                    function apiCall({
                    url,
                    method = 'GET',
                    headers = {},
                    timeout = 5000
                    }) {
                    console.log(`Making ${method} request to ${url}`);
                    console.log('Headers:', headers);
                    console.log('Timeout:', timeout);
                    }

                    apiCall({
                    url: '/api/users',
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'}
                    });

                    // Nested parameter destructuring
                    function processOrder({
                    user: {name, email},
                    items: [{name: itemName, price}],
                    shipping: {address, method}
                    }) {
                    console.log(`Processing order for ${name} (${email})`);
                    console.log(`Item: ${itemName} - $${price}`);
                    console.log(`Shipping to ${address} via ${method}`);
                    }

                    // Array of objects destructuring
                    const users = [
                    {name: 'Alice', age: 30},
                    {name: 'Bob', age: 25},
                    {name: 'Charlie', age: 35}
                    ];

                    const [firstUser, ...otherUsers] = users;
                    const {name: firstUserName} = firstUser;

                    // Map with destructuring
                    const userMap = new Map([
                    ['user1', {name: 'Alice', age: 30}],
                    ['user2', {name: 'Bob', age: 25}]
                    ]);

                    for (const [key, {name, age}] of userMap) {
                    console.log(`${key}: ${name} is ${age} years old`);
                    }
                </div>

                <div class="demo-container">
                    <div class="demo-title">🎯 Object Destructuring Demo</div>
                    <button onclick="runObjectDestructuring()">Run Object Examples</button>
                    <div id="object-output" class="output" style="display: none;"></div>
                </div>
            </div>

            <div class="card">
                <h2>🔀 Mixed Destructuring</h2>

                <h3>Complex Data Structures</h3>
                <div class="code-block" data-language="JavaScript">
                    // API response destructuring
                    const apiResponse = {
                    data: {
                    users: [
                    {id: 1, name: 'Alice', posts: [{title: 'Hello World'}]},
                    {id: 2, name: 'Bob', posts: [{title: 'JavaScript Tips'}]}
                    ],
                    meta: {
                    total: 2,
                    page: 1
                    }
                    },
                    status: 'success'
                    };

                    // Complex nested destructuring
                    const {
                    data: {
                    users: [
                    {name: firstName, posts: [{title: firstPost}]},
                    {name: secondName}
                    ],
                    meta: {total, page}
                    },
                    status
                    } = apiResponse;

                    console.log(firstName, firstPost, secondName, total, page, status);

                    // GraphQL-like query destructuring
                    const graphqlResponse = {
                    data: {
                    user: {
                    name: 'John',
                    posts: {
                    edges: [
                    {node: {title: 'Post 1', comments: {count: 5}}},
                    {node: {title: 'Post 2', comments: {count: 3}}}
                    ]
                    }
                    }
                    }
                    };

                    const {
                    data: {
                    user: {
                    name,
                    posts: {
                    edges: [
                    {node: {title: title1, comments: {count: comments1}}},
                    {node: {title: title2, comments: {count: comments2}}}
                    ]
                    }
                    }
                    }
                    } = graphqlResponse;
                </div>

                <h3>Dynamic Destructuring</h3>
                <div class="code-block" data-language="JavaScript">
                    // Dynamic property extraction
                    function extractProperties(obj, ...props) {
                    return props.reduce((result, prop) => {
                    if (prop in obj) {
                    result[prop] = obj[prop];
                    }
                    return result;
                    }, {});
                    }

                    const user = {name: 'Alice', age: 30, email: 'alice@example.com', city: 'NYC'};
                    const extracted = extractProperties(user, 'name', 'email');

                    // Conditional destructuring
                    function processUser(user) {
                    if (user.type === 'admin') {
                    const {name, permissions, lastLogin} = user;
                    return {name, permissions, lastLogin};
                    } else {
                    const {name, profile} = user;
                    return {name, profile};
                    }
                    }

                    // Destructuring with validation
                    function validateAndExtract(obj, schema) {
                    const result = {};

                    for (const [key, config] of Object.entries(schema)) {
                    const {required = false, default: defaultValue} = config;

                    if (required && !(key in obj)) {
                    throw new Error(`Missing required property: ${key}`);
                    }

                    result[key] = obj[key] || defaultValue;
                    }

                    return result;
                    }

                    const schema = {
                    name: {required: true},
                    age: {required: true},
                    city: {default: 'Unknown'}
                    };

                    const validatedUser = validateAndExtract(user, schema);
                </div>

                <h3>Destructuring in Modern Patterns</h3>
                <div class="code-block" data-language="JavaScript">
                    // React component props destructuring
                    function UserProfile({user: {name, avatar}, showDetails = true, onEdit}) {
                    return `
                    <div class="user-profile">
                        <img src="${avatar}" alt="${name}">
                        <h2>${name}</h2>
                        ${showDetails ? '<div class="details">...</div>' : ''}
                        <button onclick="handleEdit()">Edit</button>
                    </div>
                    `;
                    }

                    // Redux action destructuring
                    function userReducer(state = {}, action) {
                    switch (action.type) {
                    case 'UPDATE_USER':
                    const {payload: {id, updates}} = action;
                    return {
                    ...state,
                    [id]: {...state[id], ...updates}
                    };
                    default:
                    return state;
                    }
                    }

                    // Async/await with destructuring
                    async function fetchUserData(userId) {
                    try {
                    const {data: {user, posts}} = await fetch(`/api/users/${userId}`).then(r => r.json());
                    const {name, email} = user;
                    const [latestPost] = posts;

                    return {name, email, latestPost};
                    } catch (error) {
                    console.error('Failed to fetch user data:', error);
                    return null;
                    }
                    }

                    // Promise destructuring
                    Promise.all([
                    fetch('/api/user').then(r => r.json()),
                    fetch('/api/posts').then(r => r.json())
                    ]).then(([{user}, {posts}]) => {
                    console.log('User:', user);
                    console.log('Posts:', posts);
                    });

                    // Module destructuring
                    const {
                    createElement: h,
                    Fragment,
                    useState,
                    useEffect
                    } = React;

                    // Import destructuring
                    import {
                    debounce,
                    throttle,
                    memoize
                    } from 'lodash';
                </div>

                <div class="demo-container">
                    <div class="demo-title">🎯 Mixed Destructuring Demo</div>
                    <button onclick="runMixedDestructuring()">Run Mixed Examples</button>
                    <div id="mixed-output" class="output" style="display: none;"></div>
                </div>
            </div>

            <div class="card">
                <h2>🛠️ Real-World Applications</h2>

                <div class="tabs">
                    <button class="tab active" onclick="showTab('react')">React</button>
                    <button class="tab" onclick="showTab('nodejs')">Node.js</button>
                    <button class="tab" onclick="showTab('api')">API</button>
                    <button class="tab" onclick="showTab('config')">Config</button>
                </div>

                <div id="react" class="tab-content active">
                    <h3>React Component Destructuring</h3>
                    <div class="code-block" data-language="JavaScript">
                        // Props destructuring
                        function UserCard({
                        user: {name, email, avatar},
                        isOnline = false,
                        onUserClick,
                        className = ''
                        }) {
                        const handleClick = () => {
                        onUserClick(user);
                        };

                        return (
                        <div className={`user-card ${className} ${isOnline ? 'online' : 'offline' }`}>
                            <img src={avatar} alt={name} />
                            <div className="user-info">
                                <h3>{name}</h3>
                                <p>{email}</p>
                                <span className="status">{isOnline ? 'Online' : 'Offline'}</span>
                            </div>
                            <button onClick={handleClick}>View Profile</button>
                        </div>
                        );
                        }

                        // Hook destructuring
                        function useUserProfile(userId) {
                        const [user, setUser] = useState(null);
                        const [loading, setLoading] = useState(true);
                        const [error, setError] = useState(null);

                        useEffect(() => {
                        fetchUser(userId)
                        .then(setUser)
                        .catch(setError)
                        .finally(() => setLoading(false));
                        }, [userId]);

                        return {user, loading, error};
                        }

                        // Custom hook usage
                        function ProfilePage({userId}) {
                        const {user, loading, error} = useUserProfile(userId);

                        if (loading) return <div>Loading...</div>;
                        if (error) return <div>Error: {error.message}</div>;

                        const {name, email, posts} = user;

                        return (
                        <div>
                            <h1>{name}</h1>
                            <p>{email}</p>
                            <div className="posts">
                                {posts.map(({id, title, content}) => (
                                <div key={id} className="post">
                                    <h3>{title}</h3>
                                    <p>{content}</p>
                                </div>
                                ))}
                            </div>
                        </div>
                        );
                        }
                    </div>
                </div>

                <div id="nodejs" class="tab-content">
                    <h3>Node.js Destructuring</h3>
                    <div class="code-block" data-language="JavaScript">
                        // Environment variables
                        const {
                        NODE_ENV = 'development',
                        PORT = 3000,
                        DATABASE_URL,
                        JWT_SECRET
                        } = process.env;

                        // Express middleware
                        app.use(({body, params, query}, res, next) => {
                        console.log('Request data:', {body, params, query});
                        next();
                        });

                        // Route handlers
                        app.get('/users/:id', async ({params: {id}}, res) => {
                        try {
                        const {name, email, posts} = await User.findById(id);
                        res.json({name, email, posts});
                        } catch (error) {
                        res.status(500).json({error: error.message});
                        }
                        });

                        // Database operations
                        const {ObjectId} = require('mongodb');
                        const {connection, model} = require('mongoose');

                        // File system operations
                        const {readFile, writeFile, mkdir} = require('fs').promises;
                        const {join, resolve, dirname} = require('path');

                        // Package.json destructuring
                        const {name, version, dependencies} = require('./package.json');

                        // CLI argument parsing
                        const [,, ...args] = process.argv;
                        const [command, ...options] = args;

                        // Stream destructuring
                        const {Readable, Writable, Transform} = require('stream');
                    </div>
                </div>

                <div id="api" class="tab-content">
                    <h3>API Response Handling</h3>
                    <div class="code-block" data-language="JavaScript">
                        // REST API response
                        async function fetchUserPosts(userId) {
                        const response = await fetch(`/api/users/${userId}/posts`);
                        const {
                        data: posts,
                        meta: {total, page, hasNext}
                        } = await response.json();

                        return {posts, total, page, hasNext};
                        }

                        // GraphQL response
                        const query = `
                        query GetUser($id: ID!) {
                        user(id: $id) {
                        name
                        email
                        posts {
                        edges {
                        node {
                        id
                        title
                        content
                        }
                        }
                        }
                        }
                        }
                        `;

                        const {data: {user: {name, email, posts: {edges}}}} = await graphql(query, {id: userId});
                        const userPosts = edges.map(({node}) => node);

                        // WebSocket message handling
                        ws.on('message', (message) => {
                        const {type, payload} = JSON.parse(message);

                        switch (type) {
                        case 'USER_UPDATE':
                        const {id, updates} = payload;
                        updateUser(id, updates);
                        break;
                        case 'CHAT_MESSAGE':
                        const {from, text, timestamp} = payload;
                        broadcastMessage({from, text, timestamp});
                        break;
                        }
                        });

                        // Error handling
                        async function apiRequest(url, options = {}) {
                        try {
                        const response = await fetch(url, options);
                        const {ok, status, statusText} = response;

                        if (!ok) {
                        throw new Error(`HTTP ${status}: ${statusText}`);
                        }

                        return await response.json();
                        } catch (error) {
                        const {name, message} = error;
                        console.error(`${name}: ${message}`);
                        throw error;
                        }
                        }
                    </div>
                </div>

                <div id="config" class="tab-content">
                    <h3>Configuration Management</h3>
                    <div class="code-block" data-language="JavaScript">
                        // Application configuration
                        const config = {
                        development: {
                        api: {
                        baseURL: 'http://localhost:3000',
                        timeout: 5000,
                        retries: 3
                        },
                        database: {
                        host: 'localhost',
                        port: 5432,
                        name: 'myapp_dev'
                        }
                        },
                        production: {
                        api: {
                        baseURL: 'https://api.myapp.com',
                        timeout: 10000,
                        retries: 5
                        },
                        database: {
                        host: process.env.DB_HOST,
                        port: process.env.DB_PORT,
                        name: process.env.DB_NAME
                        }
                        }
                        };

                        // Environment-specific destructuring
                        const {
                        api: {baseURL, timeout, retries},
                        database: {host, port, name}
                        } = config[NODE_ENV];

                        // Feature flags
                        const features = {
                        newDashboard: true,
                        betaFeatures: false,
                        experimentalApi: false
                        };

                        const {
                        newDashboard,
                        betaFeatures,
                        experimentalApi
                        } = features;

                        // Theme configuration
                        const theme = {
                        colors: {
                        primary: '#007bff',
                        secondary: '#6c757d',
                        success: '#28a745',
                        danger: '#dc3545'
                        },
                        fonts: {
                        primary: 'Arial, sans-serif',
                        monospace: 'Courier New, monospace'
                        },
                        spacing: {
                        small: '8px',
                        medium: '16px',
                        large: '24px'
                        }
                        };

                        const {
                        colors: {primary, secondary},
                        fonts: {primary: primaryFont},
                        spacing: {medium: defaultSpacing}
                        } = theme;
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>⚡ Performance Considerations</h2>

                <h3>Memory and Performance</h3>
                <div class="code-block" data-language="JavaScript">
                    // Avoid creating unnecessary objects
                    // Bad: Creates new object every time
                    function processUser(user) {
                    const {name, age} = user;
                    return {name, age, processed: true};
                    }

                    // Better: Reuse existing structure when possible
                    function processUser(user) {
                    const {name, age} = user;
                    return {...user, processed: true};
                    }

                    // Avoid deep destructuring in loops
                    // Bad: Repeated destructuring
                    users.forEach(user => {
                    const {profile: {address: {city}}} = user;
                    console.log(city);
                    });

                    // Better: Cache destructured values
                    const cities = users.map(user => {
                    const {profile: {address: {city}}} = user;
                    return city;
                    });
                    cities.forEach(city => console.log(city));

                    // Use rest parameters efficiently
                    // Bad: Creates unnecessary arrays
                    function logUserInfo({name, age, ...rest}) {
                    console.log(name, age);
                    console.log(Object.keys(rest)); // May create large objects
                    }

                    // Better: Only destructure what you need
                    function logUserInfo({name, age}) {
                    console.log(name, age);
                    }

                    // Benchmark: Traditional vs Destructuring
                    function benchmark() {
                    const user = {name: 'John', age: 30, email: 'john@example.com'};
                    const iterations = 1000000;

                    console.time('Traditional');
                    for (let i = 0; i < iterations; i++) { const name=user.name; const age=user.age; }
                        console.timeEnd('Traditional'); console.time('Destructuring'); for (let i=0; i < iterations;
                        i++) { const {name, age}=user; } console.timeEnd('Destructuring'); } </div>

                        <div class="demo-container">
                            <div class="demo-title">⚡ Performance Demo</div>
                            <button onclick="runPerformanceTest()">Run Performance Test</button>
                            <div id="performance-output" class="output" style="display: none;"></div>
                        </div>
                </div>
            </div>

            <div class="best-practices">
                <h3>🎯 Destructuring Best Practices</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div>
                        <h4>Do's</h4>
                        <ul>
                            <li>Use destructuring for cleaner code</li>
                            <li>Provide default values for optional properties</li>
                            <li>Use meaningful variable names</li>
                            <li>Destructure function parameters</li>
                            <li>Combine with other ES6 features</li>
                            <li>Use rest parameters for flexible functions</li>
                        </ul>
                    </div>
                    <div>
                        <h4>Don'ts</h4>
                        <ul>
                            <li>Don't over-destructure in performance-critical code</li>
                            <li>Don't create overly complex nested destructuring</li>
                            <li>Don't destructure in tight loops unnecessarily</li>
                            <li>Don't ignore error handling with destructuring</li>
                            <li>Don't use destructuring for single property access</li>
                            <li>Don't destructure large objects repeatedly</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="highlight">
                <h3>🚀 Advanced Destructuring Patterns</h3>
                <p>
                    <strong>Conditional Destructuring:</strong> Use logical operators to conditionally destructure
                    properties.<br>
                    <strong>Pipeline Destructuring:</strong> Chain destructuring operations for data transformation.<br>
                    <strong>Proxy Destructuring:</strong> Use Proxy objects to create dynamic destructuring
                    patterns.<br>
                    <strong>Template Destructuring:</strong> Combine destructuring with template literals for dynamic
                    code generation.
                </p>
            </div>
        </div>

        <script>
            // Tab functionality
            function showTab(tabName) {
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });

                document.querySelectorAll('.tab').forEach(tab => {
                    tab.classList.remove('active');
                });

                document.getElementById(tabName).classList.add('active');
                event.target.classList.add('active');
            }

            // Array destructuring demo
            function runArrayDestructuring() {
                const output = document.getElementById('array-output');
                output.style.display = 'block';

                let result = '';

                // Basic array destructuring
                const colors = ['red', 'green', 'blue', 'yellow'];
                const [first, second, , fourth] = colors;
                result += `Basic: [${first}, ${second}, _, ${fourth}]\n`;

                // Rest parameters
                const numbers = [1, 2, 3, 4, 5];
                const [head, ...tail] = numbers;
                result += `Rest: head=${head}, tail=[${tail.join(', ')}]\n`;

                // Swapping
                let a = 10, b = 20;
                [a, b] = [b, a];
                result += `Swap: a=${a}, b=${b}\n`;

                // Function returns
                function getStats() {
                    return [42, 'active', true];
                }
                const [count, status, isValid] = getStats();
                result += `Function: count=${count}, status=${status}, valid=${isValid}\n`;

                // Nested destructuring
                const matrix = [[1, 2], [3, 4]];
                const [[a1, a2], [b1, b2]] = matrix;
                result += `Nested: ${a1},${a2} | ${b1},${b2}\n`;

                output.textContent = result;
            }

            // Object destructuring demo
            function runObjectDestructuring() {
                const output = document.getElementById('object-output');
                output.style.display = 'block';

                let result = '';

                // Basic object destructuring
                const user = {
                    name: 'Alice',
                    age: 30,
                    email: 'alice@example.com',
                    city: 'New York'
                };

                const { name, age, email } = user;
                result += `Basic: ${name}, ${age}, ${email}\n`;

                // Renaming and defaults
                const { name: userName, country = 'USA' } = user;
                result += `Renamed: ${userName}, ${country}\n`;

                // Nested destructuring
                const person = {
                    name: 'Bob',
                    address: {
                        street: '123 Main St',
                        city: 'Boston'
                    }
                };

                const { name: personName, address: { city } } = person;
                result += `Nested: ${personName} from ${city}\n`;

                // Rest properties
                const { name: n, ...rest } = user;
                result += `Rest: ${n}, others: ${Object.keys(rest).join(', ')}\n`;

                // Function parameters
                function greet({ name, age = 0 }) {
                    return `Hello ${name}, you are ${age} years old`;
                }

                result += `Function: ${greet({ name: 'Charlie', age: 25 })}\n`;

                output.textContent = result;
            }

            // Mixed destructuring demo
            function runMixedDestructuring() {
                const output = document.getElementById('mixed-output');
                output.style.display = 'block';

                let result = '';

                // Complex API response
                const apiResponse = {
                    data: {
                        users: [
                            { id: 1, name: 'Alice', posts: [{ title: 'Hello' }] },
                            { id: 2, name: 'Bob', posts: [{ title: 'World' }] }
                        ]
                    },
                    meta: { total: 2, page: 1 }
                };

                const {
                    data: { users: [{ name: firstName }, { name: secondName }] },
                    meta: { total }
                } = apiResponse;

                result += `API: ${firstName} and ${secondName}, total: ${total}\n`;

                // Array of objects
                const products = [
                    { id: 1, name: 'Laptop', price: 999, category: { name: 'Electronics' } },
                    { id: 2, name: 'Book', price: 29, category: { name: 'Education' } }
                ];

                const [{ name: product1, category: { name: cat1 } }, { price: price2 }] = products;
                result += `Products: ${product1} (${cat1}), second price: $${price2}\n`;

                // Dynamic destructuring
                const config = {
                    api: { url: 'https://api.example.com', timeout: 5000 },
                    ui: { theme: 'dark', language: 'en' }
                };

                const sections = ['api', 'ui'];
                sections.forEach(section => {
                    const sectionData = config[section];
                    const keys = Object.keys(sectionData);
                    result += `${section}: ${keys.join(', ')}\n`;
                });

                output.textContent = result;
            }

            // Performance test
            function runPerformanceTest() {
                const output = document.getElementById('performance-output');
                output.style.display = 'block';

                let result = '';

                const testData = {
                    name: 'John',
                    age: 30,
                    email: 'john@example.com',
                    city: 'New York',
                    country: 'USA'
                };

                const iterations = 100000;

                // Traditional approach
                const start1 = performance.now();
                for (let i = 0; i < iterations; i++) {
                    const name = testData.name;
                    const age = testData.age;
                    const email = testData.email;
                }
                const end1 = performance.now();

                // Destructuring approach
                const start2 = performance.now();
                for (let i = 0; i < iterations; i++) {
                    const { name, age, email } = testData;
                }
                const end2 = performance.now();

                result += `Performance Test (${iterations} iterations):\n`;
                result += `Traditional: ${(end1 - start1).toFixed(2)}ms\n`;
                result += `Destructuring: ${(end2 - start2).toFixed(2)}ms\n`;

                const ratio = (end2 - start2) / (end1 - start1);
                result += `Ratio: ${ratio.toFixed(2)}x\n`;

                if (ratio < 1.1) {
                    result += `Result: Destructuring is comparable in performance\n`;
                } else if (ratio < 2) {
                    result += `Result: Destructuring is slightly slower\n`;
                } else {
                    result += `Result: Traditional approach is significantly faster\n`;
                }

                output.textContent = result;
            }

            // Initialize page
            document.addEventListener('DOMContentLoaded', function () {
                console.log('ES6 Destructuring guide loaded');
            });
        </script>
</body>

</html>